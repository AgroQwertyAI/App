Микросервис "телеграм"

- Должен загружать из файла .env (модулем env который с ним работает ПОРТ для фастапи)
- Оттуда же загружает IP адрес и порт микросервисов "обработка сообщений", "next api routes"

FastAPI:

Функция отправки сообщения
- POST /send_message(chat_id, - id чата
text, - текст сообщения)

- POST /update при получении этого запроса должен заново загрузить данные из микросервиса данных. Может поменятся ID бота.


Функциональность:

При запуске, должен обращаться к сервису данных

Использует библиотеку Python Telegram Bot.

При получении нового сообщения, должен отправлять HTTP запрос на сервис обработки сообщений. Должен следить только за сообщениями в группах которые были получены из get_active_chats(source_name)

—— НА СЕРВИС ОБРАБОТКА СООБЩЕНИЙ: —-

- POST /new_message(
source_name, - Имя этого источника, всегда должно быть "telegram"
chat_id,
text,
sender_id, - ID отправителя
sender_name, - Имя отправителя
image, - может и не быть, закодированное в blob-ссылку изображение. Если телеграм уже дает ссылку на какой-то сервис, скачать картинку и закодировать в blob)

——————-

—— На сервис: next api routes ——
При добавлении в новую группу, должен отправлять HTTP запрос на сервис данных
const response = await axios.post(${DATA_SERVICE_URI}/api/chats, {
      chat_id: chatId,
      chat_name: chat.name || "Unknown Group",
      source_name: "whatsapp"
    });

При удалении из группы
- DELETE {DATA_SERVICE_URI}/api/chats/[chat_id]

При запускt должен делать HTTP запрос к сервису данных


- GET /get_telegram_api_key(source_name)
возвращает ключ апи телеграма

————-